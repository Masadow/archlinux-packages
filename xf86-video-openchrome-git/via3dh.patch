--- via_3d.h.orig	2014-12-29 00:41:11.495649067 +0900
+++ via_3d.h	2014-12-29 00:41:35.086522731 +0900
@@ -24,6 +24,10 @@
 #ifndef VIA_3D_H
 #define VIA_3D_H
 
+#ifndef HAVE_STRNDUP
+#define HAVE_STRNDUP 1
+#endif
+
 #include "xf86.h"
 #include "via_dmabuffer.h"
 
