# Maintainer: Daichi Shinozaki <dsdseg@gmail.com>
pkgname=mesos
pkgver=0.19.0
pkgrel=1
pkgdesc="A cluster manager that simplifies the complexity of running applications on a shared pool of servers"
arch=('x86_64')
url='http://mesos.apache.org/'
license=('Apache')
groups=('science')
depends=('gcc47' # gcc 4.8 or later can't build the bundled boost-1.53.0
         'jdk7-openjdk' 'python' 'python-botocore' 'curl' 'libsasl' 'maven' 'snappy')
source=("http://www.apache.org/dist/$pkgname/$pkgver/$pkgname-$pkgver.tar.gz")
md5sums=('6e4d4efc2be6cfa993ec5773261df220')

prepare() {
	cd "$srcdir/$pkgname-$pkgver"
  if [ ! -d build ]; then
    mkdir build
  fi
}

build() {
	cd "$srcdir/$pkgname-$pkgver"
  cd build
	CC=gcc-4.7 CXX=g++-4.7 CFLAGS='-O' CXXFLAGS='-O' LDFLAGS='-lsnappy' ../configure --prefix=/usr
	make
}

#check() {
#	cd "$srcdir/$pkgname-$pkgver"
#  cd build
#	make -k check
#}

package() {
	cd "$srcdir/$pkgname-$pkgver"
  cd build
	make DESTDIR="$pkgdir/" install
}
